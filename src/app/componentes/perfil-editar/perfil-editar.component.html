<!-- Barra superior de redes sociales (alineada a la derecha) -->
<div class="top-bar-sevillanea" id="topBar">
  <div class="topbar-content">
    <div class="social-icons">
      <a href="https://www.instagram.com/" target="_blank">
        <img src="assets/imagenes/instagram.png" alt="Instagram" class="icono-red" />
        <span>Instagram</span>
      </a>
      <a href="https://www.tiktok.com/es-419/" target="_blank">
        <img src="assets/imagenes/tiktok.png" alt="TikTok" class="icono-red" />
        <span>TikTok</span>
      </a>
      <a href="https://www.youtube.com/" target="_blank">
        <img src="assets/imagenes/youtube.png" alt="YouTube" class="icono-red" />
        <span>YouTube</span>
      </a>
    </div>
  </div>
</div>

<!--  Men칰 blanco que sube y reemplaza al negro -->
<nav class="navbar" id="navbar">
  <div class="navbar-container">

    <a routerLink="/" class="navbar-logo">
      <img src="assets/imagenes/sevillanea.png" alt="Logotipo Sevillanea" class="logo-izquierda" />
    </a>

    <!-- MENU HAMBURGUESA(RESPONSIVE EN VERSI칍N M칍VIL PARA QUE NO SE DESAJUSTE LAS OPCIONES DEL MEN칔) -->
    <div class="hamburger" (click)="toggleMenu()" [class.activo]="menuAbierto">
      <span></span>
      <span></span>
      <span></span>
    </div>

    <ul class="navbar-menu" [class.abierto]="menuAbierto">
      <li><a routerLink="/">Inicio</a></li>
      <li><a routerLink="/ofertantes">Actividades</a></li>
      <li><a routerLink="/consumidores">Comunidad</a></li>
      <li><a routerLink="/contacto">Contacto</a></li>

      <!-- Login / Perfil -->
      <li [class.hidden]="isLoggedIn"><a routerLink="/login">Iniciar sesi칩n</a></li>
      <li [class.hidden]="!isLoggedIn">
        <a [routerLink]="['/perfil', usuario?.id]">Tu perfil</a>
      </li>
      <li [class.hidden]="isLoggedIn"><a routerLink="/registro">Reg칤strate</a></li>
    </ul>

  </div>
</nav>


<!-- Secci칩n cabecera "TU PERFIL" -->
<section class="ofertantes-header">
  <div class="overlay"></div>
  <div class="ofertantes-header-content">
    <h1>CONFIGURACI칍N DE CUENTA</h1>
  </div>
</section>



<div class="container mt-4">
  <h2>Editar usuario</h2>

  <form [formGroup]="form" (ngSubmit)="modificarUsuario()">

    <!-- Nombre -->
    <div class="mb-3">
      <label>Nombre de usuario:</label>
      <input type="text" class="form-control" formControlName="username" />

      <div class="alert alert-danger mt-1"
        [hidden]="!(form.get('username')?.invalid && (form.get('username')?.dirty || form.get('username')?.touched))">

        <div [hidden]="!form.get('username')?.errors?.['required']">
          El nombre es obligatorio
        </div>

        <div [hidden]="!form.get('username')?.errors?.['minlength']">
          El nombre debe tener al menos 2 caracteres
        </div>

      </div>
    </div>

    <!-- Email -->
    <div class="mb-3">
      <label>Email:</label>
      <input type="email" class="form-control" formControlName="email" />

      <div class="alert alert-danger mt-1"
        [hidden]="!(form.get('email')?.invalid && (form.get('email')?.dirty || form.get('email')?.touched))">

        <div [hidden]="!form.get('email')?.errors?.['required']">
          El email es obligatorio
        </div>

        <div [hidden]="!form.get('email')?.errors?.['email']">
          Introduce un email v치lido
        </div>

      </div>
    </div>

    <!-- Contrase침a actual -->
    <div class="mb-3">
      <label>Contrase침a actual (si quieres cambiarla):</label>
      <input type="password" class="form-control" formControlName="passwordActual" />
    </div>

    <!-- Nueva contrase침a -->
    <div class="mb-3">
      <label>Nueva contrase침a:</label>
      <input type="password" class="form-control" formControlName="passwordNueva" />

      <!-- Error: falta contrase침a actual -->
      <div class="alert alert-danger mt-1" [hidden]="!(
             form.hasError('passwordInvalida') &&
             (form.get('passwordNueva')?.dirty || form.get('passwordNueva')?.touched)
           )">
        Para cambiar la contrase침a debes introducir la contrase침a actual
      </div>
    </div>

    <div class="botones">
      <button type="submit" class="btn btn-primary" [disabled]="form.invalid">Guardar cambios</button>
      <button type="button" class="btn btn-secondary" (click)="cancelar()">Cancelar</button>
    </div>

  </form>

  <p class="mt-3" [style.color]="mensaje.includes('correctamente') ? 'green' : 'red'">
    {{ mensaje }}
  </p>
</div>






<!-- SECCI칍N FINAL SEVILLANEA -->


<section class="bloque-final-sevillanea">
  <div class="bloque-container">
    <div class="bloque-column">
      <img src="assets/imagenes/sevillanea.png" alt="Logotipo Sevillanea" class="logo-final" />
      <p>Descubre, organiza y comparte experiencias 칰nicas en Sevilla. No solo puedes disfrutar de las mejores
        actividades de ocio, sino
        tambi칠n convertirte en el organizador: publica tus propias propuestas y haz que otros usuarios vivan la ciudad a
        trav칠s de tu arte, tu pasi칩n y tu visi칩n.</p>
    </div>


    <div class="bloque-column">
      <h3>Gu칤a de...</h3>
      <ul>
        <li><a routerLink="/ofertantes" (click)="scrollTop()">Ofertas de actividades</a></li>
        <li><a routerLink="/consumidores" (click)="scrollTop()">Demandas de actividades</a></li>
      </ul>
    </div>


    <div class="bloque-column">
      <h3>Informaci칩n</h3>
      <ul>
        <li><a routerLink="/quienesSomos" (click)="scrollTop()">Qui칠nes Somos</a></li>
        <li><a routerLink="/privacidad" (click)="scrollTop()">Pol칤tica de privacidad</a></li>
        <li><a routerLink="/cookies" (click)="scrollTop()">Pol칤tica de cookies</a></li>
        <li><a routerLink="/contacto" (click)="scrollTop()">Contacto</a></li>
      </ul>
    </div>

    <div class="bloque-column">
      <h3>쮿ablamos?</h3>
      <p>游 954 00 00 00</p>
      <p>游닎 infosevillanea.com</p>
    </div>
  </div>
</section>


<!-- FOOTER FINAL DE LA P츼GINA-->
<footer class="py-4 bg-dark text-light text-center">
  <div class="container">
    <p class="mb-1">춸 2025 <strong>Sevillanea</strong> 췅 Vive Sevilla con arte</p>
  </div>
</footer>